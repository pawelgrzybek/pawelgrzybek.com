<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=author content="Pawel Grzybek - https://pawelgrzybek.com"><meta name=generator content="Hugo 0.80.0"><title>The Intersection Observer API explained | pawelgrzybek.com</title><meta name=description content="Detecting when elements become visible on the viewport has always been an expensive task. Not anymore ‚Äî the Intersection Observer API just landed in Chromium."><meta property="og:site_name" content="pawelgrzybek.com"><meta property="og:title" content="The Intersection Observer API explained | pawelgrzybek.com"><meta property="og:url" content="https://pawelgrzybek.com/the-intersection-observer-api-explained/"><meta property="og:type" content="article"><meta property="og:description" content="Detecting when elements become visible on the viewport has always been an expensive task. Not anymore ‚Äî the Intersection Observer API just landed in Chromium."><meta property="og:image" content="https://pawelgrzybek.com/photos/2016-06-13.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@pawelgrzybek"><meta name=twitter:creator content="@pawelgrzybek"><link rel=canonical href=https://pawelgrzybek.com/the-intersection-observer-api-explained/><link rel=alternate type=application/rss+xml title=pawelgrzybek.com href=https://pawelgrzybek.com/feed.xml><link rel=alternate type=application/feed+json title=pawelgrzybek.com href=https://pawelgrzybek.com/feed.json><link rel=apple-touch-icon sizes=180x180 href=/assets/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/assets/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/favicon-16x16.png sizes=16x16><link rel=manifest href=/assets/manifest.json><link rel="shortcut icon" href=/assets/favicon.ico><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/assets/mstile-144x144.png"><meta name=theme-color content="#ffffff"><style>:root{--fz: 1rem;--fzb: 106.25%;--lh: 1.764705882rem;--type-scale: 1.25;--color-text: #24292e;--color-background: #fff;--color-link: #005cc5;--color-update-background: #fbebea;--color-update-border: #edb0ab;--color-box-background: #f7f7f7;--color-box-border: #eee;--color-box-border-dark: #ddd;--color-syntax-k: #006699;--color-syntax-s: #cc3300;--color-syntax-m: #ff6600;--color-syntax-c: #999;--color-syntax-nb: #366;--color-syntax-o: #555555;--color-syntax-na: #330099;--color-syntax-nv: #003333}@media screen and (min-width:764px){:root{--fzb: 112.5%;--lh: 1.77778rem}}@media(prefers-color-scheme:dark){:root{--color-text: #fafbfc;--color-background: #24292e;--color-link: #9ecbff;--color-update-background: #6d3733;--color-update-border: #522926;--color-box-background: hsl(210, 12%, 12%);--color-box-border: hsl(210, 12%, 20%);--color-box-border-dark: hsl(210, 12%, 30%);--color-syntax-k: #9ecbff;--color-syntax-s: #f97583;--color-syntax-m: #ffab70;--color-syntax-c: #6a737d;--color-syntax-nb: #28a745;--color-syntax-o: #959da5;--color-syntax-na: #fafbfc;--color-syntax-nv: #00b1b1}}::selection{background:var(--color-link);color:#fff;text-shadow:none}html{font-size:var(--fzb);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased;-webkit-text-size-adjust:100%;box-sizing:border-box;scroll-behavior:smooth}*,*::before,*::after{margin:0;padding:0;box-sizing:inherit}body{background-color:var(--color-background);color:var(--color-text);font-family:-apple-system,BlinkMacSystemFont,segoe ui,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol;font-size:var(--fz);line-height:var(--lh)}img{display:block;max-width:100%;height:auto;border:0}a{background:0 0;color:var(--color-link);word-wrap:break-word}a:hover,a:focus,a:active{color:var(--color-text)}p,h1,h2,h3,h4,h5,h6{margin-bottom:var(--lh)}h1,h2,h3,h4,h5,h6{margin-top:calc(var(--lh) * 1.5);font-weight:700;text-decoration:none}h1{font-size:calc( var(--fz) * var(--type-scale) * var(--type-scale) * var(--type-scale));line-height:calc(var(--lh) * 1.5)}h2{font-size:calc(var(--fz) * var(--type-scale) * var(--type-scale))}h3{font-size:calc(var(--fz) * var(--type-scale))}h4{font-size:1rem}h5{font-size:calc(var(--fz)/var(--type-scale))}h6{font-size:calc(var(--fz)/var(--type-scale)/var(--type-scale))}ul,ol{margin:0 0 var(--lh)var(--lh)}li ul,li ol{margin:0 0 0 var(--lh)}hr{display:block;height:var(--lh);border:0;box-shadow:0 1px 0 #eee}blockquote{margin-bottom:var(--lh);padding:var(--lh);background:var(--color-box-background);box-shadow:inset 0 0 0 1px var(--color-box-border)}blockquote p{margin:0;font-style:italic}figure{margin-bottom:var(--lh)}figcaption{font-size:var(--fz)/var(--type-scale)/var(--type-scale)}.wrapper{width:100%;max-width:calc(700px + (2 * var(--lh)));margin:0 auto;padding:0 var(--lh)}.wrapper--wide{max-width:calc(900px + (2 * var(--lh)))}.header{position:relative;padding:calc(var(--lh) * 2) 0;display:flex;flex-direction:column}.header__skip{position:absolute;top:0;left:0;padding:0 calc(var(--lh)/2);font-size:calc(var(--fz)/var(--type-scale));transform:scale(0)}.header__skip:focus{transform:scale(1)}.header__logo{display:flex;align-items:center;justify-content:center;margin:0;font-size:calc(var(--fz));line-height:var(--lh)}.header__logo a{display:flex;flex-direction:column;align-items:center;font-weight:700;margin:0 0 calc(var(--lh)/2)}.header__logo a::before{content:"";width:calc(var(--lh) * 2);height:calc(var(--lh) * 2);margin:0 0 calc(var(--lh)/2);background-image:url(/assets/logo.jpg);background-size:100% 100%;border-radius:var(--lh)}.header__list{height:100%;display:flex;align-items:center;justify-content:center;list-style:none;margin:0}.header__item{margin-right:calc(var(--lh)/2)}.header__item:last-of-type{margin-right:0}@media screen and (min-width:764px){.header{flex-direction:row;justify-content:space-between;padding:calc(var(--lh) * 3) 0}.header__logo a{flex-direction:row;margin:0}.header__logo a::before{content:"";width:calc(var(--lh) * 2);height:calc(var(--lh) * 2);margin:0 calc(var(--lh)/2) 0 0;background-image:url(/assets/logo.jpg);background-size:100% 100%;border-radius:var(--lh)}}@media screen and (min-width:964px){.header__logo::after{font-weight:400;white-space:pre;color:var(--color-text);content:" | Software Engineer at Mindera"}}.post{margin-bottom:calc(var(--lh) * 3)}.post__title{margin-top:0}.post__url{color:var(--color-text);text-decoration:none}.post__url:hover{color:var(--color-link)}.post__meta{margin-top:calc(var(--lh) * -1);font-size:calc(var(--fz)/var(--type-scale))}.post__more{text-decoration:none;vertical-align:top}.post__hash{text-decoration:none;margin-left:calc(var(--lh)/4);color:var(--color-text);opacity:.25}.post__hash:hover{color:var(--color-link);opacity:1}.footer{color:var(--color-text);font-size:calc(var(--fz)/var(--type-scale)/var(--type-scale));font-weight:700;text-decoration:none;vertical-align:top;padding:calc(var(--lh) * 2) 0}.pager{display:flex}.pager__btn{flex-grow:1;font-size:calc(var(--fz)/var(--type-scale));font-weight:700;text-decoration:none;vertical-align:top}.pager__btn--prev{text-align:left}.pager__btn--next{text-align:right}.share{display:flex;align-items:center;background-color:var(--color-box-background);box-shadow:0 0 0 1px var(--color-box-border);margin:calc(var(--lh) * 2) 0;padding:calc(var(--lh)/2);font-size:calc(var(--fz)/var(--type-scale))}.share__icon{fill:#1da1f2;margin-right:calc(var(--lh)/2);width:var(--fz);height:var(--fz);flex-shrink:0}.share__text{margin:0}.archive{margin-left:0;list-style:none}.archive__item{padding:calc(var(--lh)/2) 0;box-shadow:0 1px 0 0 var(--color-box-border)}.archive__link{font-weight:700;text-decoration:none;color:var(--color-text)}.archive__link:hover{color:var(--color-link)}.archive__date{margin:0;font-size:calc(var(--fz)/var(--type-scale))}code,pre{border-radius:3px;background-color:var(--color-box-background);font-family:SFMono-Regular,Consolas,liberation mono,Menlo,Courier,monospace;font-size:.888889rem;vertical-align:top}pre{margin-bottom:var(--lh);padding:var(--lh);box-shadow:0 0 0 1px var(--color-box-border);overflow-x:auto}p code,li code{padding:4px 6px;box-shadow:0 0 0 1px var(--color-box-border)}kbd{border-radius:3px;background-color:var(--color-box-background);font-family:SFMono-Regular,Consolas,liberation mono,Menlo,Courier,monospace;font-size:.888889rem;vertical-align:top;padding:4px 6px;box-shadow:0 0 0 1px var(--color-box-border)}.chroma{background-color:var(--color-box-background)}.chroma .err{background-color:#faa;color:#a00}.chroma .lntd{margin:0;padding:0;border:0;vertical-align:top}.chroma .lntable{display:block;width:auto;margin:0;padding:0;border:0;border-spacing:0;overflow:auto}.chroma .hl{display:block;width:100%;background-color:var(--color-box-border)}.chroma .lnt{display:block;margin-right:.4em;padding:0 .4em;opacity:.5}.chroma .ln{margin-right:.4em;padding:0 .4em}.chroma .k{color:var(--color-syntax-k);font-weight:700}.chroma .kc{color:var(--color-syntax-k);font-weight:700}.chroma .kd{color:var(--color-syntax-k);font-weight:700}.chroma .kn{color:var(--color-syntax-k);font-weight:700}.chroma .kp{color:var(--color-syntax-k)}.chroma .kr{color:var(--color-syntax-k);font-weight:700}.chroma .kt{color:#078;font-weight:700}.chroma .na{color:var(--color-syntax-na)}.chroma .nb{color:var(--color-syntax-nb)}.chroma .nc{color:#0a8;font-weight:700}.chroma .no{color:#360}.chroma .nd{color:#99f}.chroma .ni{color:#999;font-weight:700}.chroma .ne{color:#c00;font-weight:700}.chroma .nf{color:#c0f}.chroma .nl{color:#99f}.chroma .nn{color:#0cf;font-weight:700}.chroma .nt{color:var(--color-syntax-na);font-weight:700}.chroma .nv{color:var(--color-syntax-nv)}.chroma .s{color:var(--color-syntax-s)}.chroma .sa{color:var(--color-syntax-s)}.chroma .sb{color:var(--color-syntax-s)}.chroma .sc{color:var(--color-syntax-s)}.chroma .dl{color:var(--color-syntax-s)}.chroma .sd{color:var(--color-syntax-s);font-style:italic}.chroma .s2{color:var(--color-syntax-s)}.chroma .se{color:var(--color-syntax-s);font-weight:700}.chroma .sh{color:var(--color-syntax-s)}.chroma .si{color:#a00}.chroma .sx{color:var(--color-syntax-s)}.chroma .sr{color:#3aa}.chroma .s1{color:var(--color-syntax-s)}.chroma .ss{color:#fc3}.chroma .m{color:var(--color-syntax-m)}.chroma .mb{color:var(--color-syntax-m)}.chroma .mf{color:var(--color-syntax-m)}.chroma .mh{color:var(--color-syntax-m)}.chroma .mi{color:var(--color-syntax-m)}.chroma .il{color:var(--color-syntax-m)}.chroma .mo{color:var(--color-syntax-m)}.chroma .o{color:var(--color-syntax-o)}.chroma .ow{color:#000;font-weight:700}.chroma .c{color:#999;font-style:italic}.chroma .ch{color:#999;font-style:italic}.chroma .cm{color:#999;font-style:italic}.chroma .c1{color:#999;font-style:italic}.chroma .cs{color:#999;font-style:italic;font-weight:700}.chroma .cp{color:#099}.chroma .cpf{color:#099}.chroma .gd{background-color:#fcc}.chroma .ge{font-style:italic}.chroma .gr{color:red}.chroma .gh{color:#030;font-weight:700}.chroma .gi{background-color:#cfc}.chroma .go{color:#aaa}.chroma .gp{color:#009;font-weight:700}.chroma .gs{font-weight:700}.chroma .gu{color:#030;font-weight:700}.chroma .gt{color:#9c6}.chroma .w{color:#bbb}.update{position:relative;padding:var(--lh);background-color:var(--color-update-background);box-shadow:0 0 0 1px var(--color-update-border)}.update::before{position:absolute;top:calc(var(--lh)/-2);left:calc(var(--lh)/2);height:var(--lh);padding:0 calc(var(--lh)/2);background-color:var(--color-update-border);color:#fff;font-size:calc(var(--fz)/var(--type-scale));font-weight:700;content:"Update"}.comments{list-style:none;margin-left:0}.comments__item{scroll-margin-top:var(--lh)}.comments__item .comments{box-shadow:inset 1px 0 0 var(--color-box-border-dark);padding-left:var(--lh)}.comments__item .comments .comments__author{position:relative}.comments__item .comments .comments__author::before{position:absolute;top:50%;left:calc(var(--lh) * -1);width:calc(var(--lh)/4);height:calc(var(--lh)/4);background:var(--color-box-border-dark);transform:translate(-50%,-50%);border-radius:50%;content:""}.comments__wrapper{margin-bottom:var(--lh);word-wrap:break-word}.comments__author{display:flex;margin-bottom:var(--lh)}.comments__author__photo{width:calc(var(--lh) * 1.5);height:calc(var(--lh) * 1.5);margin-right:calc(var(--lh)/2)}.comments__author__data{flex-grow:1;min-width:1px}.comments__author__name{font-weight:700;line-height:calc(var(--lh) * 0.75);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.comments__author__metadata{font-size:calc(var(--fz)/var(--type-scale)/var(--type-scale));line-height:calc(var(--lh) * 0.75);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.comments__hash{color:inherit;text-decoration:none;text-transform:uppercase}.comments__reply{margin-bottom:calc(var(--lh)/2);background:0 0;display:block;height:var(--lh);border:0;color:var(--color-link);font:inherit;font-size:calc(var(--fz)/var(--type-scale));cursor:pointer}.form{display:flex;flex-wrap:wrap;position:relative}.form--sending{opacity:.25}.form--sending::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.form--hidden{display:none}.form__col{display:flex;flex-direction:column;flex-grow:1;width:100%;margin-bottom:calc(var(--lh)/2)}@media screen and (min-width:764px){.form__col:nth-of-type(2),.form__col:nth-of-type(3),.form__col:nth-of-type(4){width:100px;margin-right:calc(var(--lh)/2)}.form__col:nth-of-type(4){margin-right:0}}.form__row{display:flex;width:100%;flex-direction:row;align-items:center;min-width:1px;margin-bottom:calc(var(--lh)/2)}.form__label{font-weight:600;font-size:calc(var(--fz)/var(--type-scale))}.form__label--thin{font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.form__input{-webkit-appearance:none;border-radius:0;border:1px solid var(--color-box-border-dark);background-color:var(--color-background);height:calc(var(--lh) * 1.5);padding:0 calc(var(--lh)/2);color:var(--color-text);font:inherit}.form__input--textarea{padding:calc(var(--lh)/4) calc(var(--lh)/2);min-height:calc(var(--lh) * 4);resize:vertical}.form__tip{font-size:calc(var(--fz)/var(--type-scale)/var(--type-scale));margin-bottom:0;text-align:right}.form__checkboxlabel{font-size:calc(var(--fz)/var(--type-scale));white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center;margin-bottom:calc(var(--lh)/2);min-width:1px}.form__checkbox{margin-right:calc(var(--lh)/4);cursor:pointer}.form__button{background:var(--color-link);color:var(--color-background);border:0;font:inherit;padding:calc(var(--lh)/4) var(--lh);cursor:pointer;font-size:calc(var(--fz)/var(--type-scale));font-weight:600}.moderation{background-color:var(--color-box-background);box-shadow:0 0 0 1px var(--color-box-border);padding:calc(var(--lh)/2);font-size:calc(var(--fz)/var(--type-scale))}.moderation--hidden{display:none}</style></head><body><div class="wrapper wrapper--wide"><header class=header><a class=header__skip href=#main>Skip to content</a><div class=header__logo><a href=/>pawelgrzybek.com</a></div><nav><ul class=header__list><li class=header__item><a href=/about title=About>About</a></li><li class=header__item><a href=/archive title=Archive>Archive</a></li><li class=header__item><a href=/feed.xml title="RSS Feed">RSS</a></li><li class=header__item><a href=https://twitter.com/pawelgrzybek title="Pawel Grzybek on Twitter">Twitter</a></li><li class=header__item><a href=https://github.com/pawelgrzybek title="Pawel Grzybek on Github">Github</a></li></ul></nav></header></div><div class=wrapper><main id=main><article class="post js-post"><h1 class=post__title>The Intersection Observer API explained</h1><p class=post__meta>Published: <time datetime=2016-06-13>2016.06.13</time> | 3 minutes read</p><p>Detecting which elements are visible within the current viewport&rsquo;s boundaries has always been a tricky and expensive task in terms of performance. Lazy loaded images on Medium.com, infinite scrolling pictures of vegan food on Pinterest or animated images on every f*****g Tumblr theme are just a few examples where this functionality can be found in abundance. <a href=https://www.iab.com/viewability-has-arrived-what-you-need-to-know-to-see-through-this-sea-change/>The reporting of ad &ldquo;visibility&rdquo;</a> for monetizing purpose is another important use case. There&rsquo;s good news on the horizon though! The web platform doesn&rsquo;t have to struggle to do all these things manually anymore ‚Äî <a href=https://www.w3.org/TR/intersection-observer/><code>The Intersection Observer API</code></a> just landed in <a href=https://blog.chromium.org/2016/05/new-apis-to-help-developers-improve.html>Chromium 51</a>. It allows us to do these things with ease, reduce CPU usage, increase battery life and eliminate rendering junk.</p><p>Bare in mind that we are talking about a really new API. At the moment of writing this article the <a href=https://www.chromestatus.com/feature/5695342691483648>browser support</a> is restricted to Google Chrome 51 and Opera 38. If you want to play around with it in older browsers give some thanks to <a href=https://twitter.com/dassurma>Surma</a> for this great <a href=https://github.com/surma-dump/IntersectionObserver/blob/polyfill/polyfill/intersectionobserver-polyfill.js>polyfill</a>.</p><p><picture>
<source srcset=/photos/2016-06-13-1.avif type=image/avif><source srcset=/photos/2016-06-13-1.webp type=image/webp><img src=/photos/2016-06-13-1.jpg alt="IntersectionObserver in Google Chrome Canary" loading=lazy decoding=async width=1400 height=954></picture></p><h2 id=how-to-use-intersection-observer-api>How to use Intersection Observer API <a href=#how-to-use-intersection-observer-api class=post__hash>#</a></h2><p>You don&rsquo;t have to declare a listener that on every single scroll event triggers some crazy <code>getBoundingClientRect()</code> calculations anymore. The new API is much nicer to use and read. Simply create a new instance of <code>IntersectionObserver</code> that takes two arguments ‚Äî a callback function and an optional <code>options</code> object. Trigger the <code>observe</code> method and pass in the element that should be watched. When the element enters or exits the viewport, the callback function will be fired.</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>watchMe</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>IntersectionObserver</span><span class=p>(</span><span class=nx>callback</span><span class=p>,</span> <span class=nx>options</span><span class=p>);</span>
<span class=nx>watchMe</span><span class=p>.</span><span class=nx>observe</span><span class=p>(</span><span class=nx>elm</span><span class=p>);</span>
</code></pre></div><p>By default, the callback function will be fired whenever an element appears and leaves the viewport. The function returns an array of <a href=https://www.w3.org/TR/intersection-observer/#intersection-observer-entry><code>IntersectionObserverEntry</code></a> objects and each of them contains properties about each element that has been shown on the viewport (<code>boundingClientRect</code>, <code>intersectionRatio</code>, <code>intersectionRect</code>, <code>rootBounds</code>, <code>target</code> and <code>time</code>).</p><p>The second parameter (<code>options</code>) allows you to specify some settings by passing the <a href=https://www.w3.org/TR/intersection-observer/#intersection-observer-init><code>IntersectionObserverInit</code></a> object. You can change the context (<code>root</code>) that defaults to <code>null</code> which is document‚Äôs viewport, the amount of margin from the context&rsquo;s boundaries (<code>rootMargin</code>) with a default value <code>0px</code>, and finally an array of <code>threshold</code> which is a list of thresholds at which to trigger the callback.</p><p>If you need to observe more than one element, simply call the <code>observe</code> method multiple times.</p><h2 id=demo-time>Demo time <a href=#demo-time class=post__hash>#</a></h2><p>Have you ever heard this quote by Stephen R. Covey from &ldquo;The 7 Habits of Highly Effective People&rdquo;?</p><blockquote><p>To learn and not to do is really not to learn. To know and not to do is really not to know.</p></blockquote><p>Demo time! I have created a list of paragraphs. Initially all of them are scaled down and see through. When a paragraph passes the viewport&rsquo;s edge by half of it&rsquo;s height (<code>threshold: [0.5]</code>) then it animates to its regular size and full opacity. Maybe it&rsquo;s not especially creative, but it does the job and allows you to copy/paste my code or extend it to make some super funky stuff :-)</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=c1>// the callback function that will be fired
</span><span class=c1>// when the element apears in the viewport
</span><span class=c1></span><span class=kd>function</span> <span class=nx>onEntry</span><span class=p>(</span><span class=nx>entry</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>entry</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>change</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=nx>change</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>classList</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;visible&#39;</span><span class=p>);</span>
  <span class=p>});</span>
<span class=p>}</span>

<span class=c1>// list of options
</span><span class=c1></span><span class=kd>let</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>threshold</span><span class=o>:</span> <span class=p>[</span><span class=mf>0.5</span><span class=p>]</span>
<span class=p>};</span>

<span class=c1>// instantiate a new Intersection Observer
</span><span class=c1></span><span class=kd>let</span> <span class=nx>observer</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>IntersectionObserver</span><span class=p>(</span><span class=nx>onEntry</span><span class=p>,</span> <span class=nx>options</span><span class=p>);</span>

<span class=c1>// list of paragraphs
</span><span class=c1></span><span class=kd>let</span> <span class=nx>elements</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=s1>&#39;p&#39;</span><span class=p>);</span>

<span class=c1>// loop through all elements
</span><span class=c1>// pass each element to observe method
</span><span class=c1>// ES2015 for-of loop can traverse through DOM Elements
</span><span class=c1></span><span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>elm</span> <span class=k>of</span> <span class=nx>elements</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>observer</span><span class=p>.</span><span class=nx>observe</span><span class=p>(</span><span class=nx>elm</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div><p><p data-height=400 data-theme-id=dark data-slug-hash=YWqWXJ data-default-tab=result data-user=pawelgrzybek data-embed-version=2 data-preview=true class=codepen>See the Pen <a href=https://codepen.io/pawelgrzybek/pen/YWqWXJ/>Intersection Observer API explained</a> by Pawel Grzybek (<a href=https://codepen.io/pawelgrzybek>@pawelgrzybek</a>) on <a href=http://codepen.io>CodePen</a>.</p><script async src=//assets.codepen.io/assets/embed/ei.js></script></p><p>Hopefully this has helped you out. Don&rsquo;t be shy and please share your experiments with using the Intersection Observer API. Any question? Please use the comments section below. If you liked this article please don&rsquo;t hesitate to use the share button. Thanks!</p><div class=share><svg xmlns="http://www.w3.org/2000/svg" class="share__icon" viewBox="0 0 512 512"><path d="M512 113.2c-18.8 8.4-39.1 14-60.3 16.5 21.7-13 38.3-33.6 46.2-58.1-20.3 12-42.8 20.8-66.7 25.5-19.2-20.4-46.5-33.1-76.7-33.1-58 0-105 47-105 105 0 8.2.9 16.2 2.7 23.9-87.3-4.4-164.7-46.2-216.5-109.8-9 15.5-14.2 33.6-14.2 52.8.0 36.4 18.5 68.6 46.7 87.4-17.2-.5-33.4-5.3-47.6-13.1.0.4.0.9.0 1.3.0 50.9 36.2 93.4 84.3 103-8.8 2.4-18.1 3.7-27.7 3.7-6.8.0-13.3-.7-19.8-1.9 13.4 41.7 52.2 72.1 98.1 73-36 28.2-81.2 45-130.5 45-8.5.0-16.8-.5-25.1-1.5 46.6 29.9 101.8 47.2 161.1 47.2 193.2.0 298.9-160.1 298.9-298.9.0-4.6-.1-9.1-.3-13.6 20.5-14.7 38.3-33.2 52.4-54.3z"/></svg><p class=share__text>If you liked this article, please <a href="https://twitter.com/intent/tweet?text=The%20Intersection%20Observer%20API%20explained&url=https%3a%2f%2fpawelgrzybek.com%2fthe-intersection-observer-api-explained%2f&via=pawelgrzybek" class=share__link title="Share on Twitter">share it on Twitter</a>.</p></div><h2 id=comments>Comments</h2><ul class=comments><li class=comments__item id=comment-d85e2f0b><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt="≈†ime Vidas" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>≈†ime Vidas</div><div class=comments__author__metadata><time datetime=2016-06-13>2016.06.13, 23:18</time>,
<a class=comments__hash href=#comment-d85e2f0b>ID: d85e2f0b</a></div></div></div><p>Can it work the other way around, i.e. shrink the paragraphs as they leave the viewport? I feel, the effect isn‚Äôt complete without both.</p><button class="comments__reply js-comments__reply">
Reply to ≈†ime Vidas</button><form class="form form--hidden js-form"><input type=hidden name=parent value=d85e2f0b><div class=form__col><label class=form__label for=name-d85e2f0b>Name:</label>
<input class="form__input js-form-name" id=name-d85e2f0b name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-d85e2f0b>Website (optional):</label>
<input class="form__input js-form-website" id=website-d85e2f0b name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-d85e2f0b>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-d85e2f0b name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-d85e2f0b>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-d85e2f0b name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-d85e2f0b>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-d85e2f0b name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div><ul class=comments><li class=comments__item id=comment-a8563c29><div class=comments__wrapper><div class=comments__author><img src=/assets/logo.jpg alt="Pawel Grzybek" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Pawel Grzybek</div><div class=comments__author__metadata><time datetime=2016-06-14>2016.06.14, 07:56</time>,
<a class=comments__hash href=#comment-a8563c29>ID: a8563c29</a></div></div></div><p>Of course you can :) This is just a quick example that I made in 5 minutes. It was not all about the effect here, just about concept. The callback function is fired whenever the element enters and exits viewport. In this case the only thing that you need to do is replace `classList.add()` with`classList.toggle()` to remove a class when it leaves the viewport.</p><button class="comments__reply js-comments__reply">
Reply to Pawel Grzybek</button><form class="form form--hidden js-form"><input type=hidden name=parent value=a8563c29><div class=form__col><label class=form__label for=name-a8563c29>Name:</label>
<input class="form__input js-form-name" id=name-a8563c29 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-a8563c29>Website (optional):</label>
<input class="form__input js-form-website" id=website-a8563c29 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-a8563c29>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-a8563c29 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-a8563c29>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-a8563c29 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-a8563c29>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-a8563c29 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div></li></ul></li><li class=comments__item id=comment-358fd3f2><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt="Alexander Wallin" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Alexander Wallin</div><div class=comments__author__metadata><time datetime=2017-05-22>2017.05.22, 14:49</time>,
<a class=comments__hash href=#comment-358fd3f2>ID: 358fd3f2</a></div></div></div><p>I'm not sure whether the API has changed, but the embedded pen is not working. The onEntry callback is called for all nodes when the page loads, so there needs to be a check on the isIntersecting property when setting the visible class.</p><p>Cheers for a good read!</p><button class="comments__reply js-comments__reply">
Reply to Alexander Wallin</button><form class="form form--hidden js-form"><input type=hidden name=parent value=358fd3f2><div class=form__col><label class=form__label for=name-358fd3f2>Name:</label>
<input class="form__input js-form-name" id=name-358fd3f2 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-358fd3f2>Website (optional):</label>
<input class="form__input js-form-website" id=website-358fd3f2 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-358fd3f2>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-358fd3f2 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-358fd3f2>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-358fd3f2 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-358fd3f2>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-358fd3f2 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div><ul class=comments><li class=comments__item id=comment-2fe86588><div class=comments__wrapper><div class=comments__author><img src=/assets/logo.jpg alt="Pawel Grzybek" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Pawel Grzybek</div><div class=comments__author__metadata><time datetime=2017-05-22>2017.05.22, 14:55</time>,
<a class=comments__hash href=#comment-2fe86588>ID: 2fe86588</a></div></div></div><p>Great spot! You are probably right ‚Äî API changed as the example is not working anymore but I'm 100% it worked fine. I added review of this post to my list to do and I will update you whenever the article is updated.</p><p>Thanks a ton for reporting and have a lovely day ü•ë</p><button class="comments__reply js-comments__reply">
Reply to Pawel Grzybek</button><form class="form form--hidden js-form"><input type=hidden name=parent value=2fe86588><div class=form__col><label class=form__label for=name-2fe86588>Name:</label>
<input class="form__input js-form-name" id=name-2fe86588 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-2fe86588>Website (optional):</label>
<input class="form__input js-form-website" id=website-2fe86588 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-2fe86588>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-2fe86588 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-2fe86588>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-2fe86588 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-2fe86588>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-2fe86588 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div></li><li class=comments__item id=comment-22f1cf19><div class=comments__wrapper><div class=comments__author><img src=/assets/logo.jpg alt="Pawel Grzybek" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Pawel Grzybek</div><div class=comments__author__metadata><time datetime=2017-05-24>2017.05.24, 05:39</time>,
<a class=comments__hash href=#comment-22f1cf19>ID: 22f1cf19</a></div></div></div><p>OK, so you were right... The API changed and the post will be amended in the next few days. Thanks a lot for reporting an issue again üçª</p><p><a title=https://twitter.com/DasSurma/status/867045377811337216 rel="nofollow noopener" href=https://twitter.com/DasSurma/status/867045377811337216>https://twitter.com/DasSurm...</a></p><button class="comments__reply js-comments__reply">
Reply to Pawel Grzybek</button><form class="form form--hidden js-form"><input type=hidden name=parent value=22f1cf19><div class=form__col><label class=form__label for=name-22f1cf19>Name:</label>
<input class="form__input js-form-name" id=name-22f1cf19 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-22f1cf19>Website (optional):</label>
<input class="form__input js-form-website" id=website-22f1cf19 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-22f1cf19>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-22f1cf19 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-22f1cf19>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-22f1cf19 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-22f1cf19>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-22f1cf19 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div><ul class=comments><li class=comments__item id=comment-c2b706ca><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt="Alexander Wallin" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Alexander Wallin</div><div class=comments__author__metadata><time datetime=2017-05-24>2017.05.24, 19:05</time>,
<a class=comments__hash href=#comment-c2b706ca>ID: c2b706ca</a></div></div></div><p>Glad to help!</p><button class="comments__reply js-comments__reply">
Reply to Alexander Wallin</button><form class="form form--hidden js-form"><input type=hidden name=parent value=c2b706ca><div class=form__col><label class=form__label for=name-c2b706ca>Name:</label>
<input class="form__input js-form-name" id=name-c2b706ca name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-c2b706ca>Website (optional):</label>
<input class="form__input js-form-website" id=website-c2b706ca name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-c2b706ca>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-c2b706ca name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-c2b706ca>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-c2b706ca name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-c2b706ca>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-c2b706ca name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div><ul class=comments><li class=comments__item id=comment-c21006f4><div class=comments__wrapper><div class=comments__author><img src=/assets/logo.jpg alt="Pawel Grzybek" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Pawel Grzybek</div><div class=comments__author__metadata><time datetime=2017-05-25>2017.05.25, 09:55</time>,
<a class=comments__hash href=#comment-c21006f4>ID: c21006f4</a></div></div></div><p>Hi @disqus_KxxmClHY2C:disqus. Based on Surma's advice I fixed the snippet. Because the callback function is invoked on initialization I added a condition to check for `isIntersecting` property. If this one passes the condition ‚Äî class is added. Thanks a lot again!</p><button class="comments__reply js-comments__reply">
Reply to Pawel Grzybek</button><form class="form form--hidden js-form"><input type=hidden name=parent value=c21006f4><div class=form__col><label class=form__label for=name-c21006f4>Name:</label>
<input class="form__input js-form-name" id=name-c21006f4 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-c21006f4>Website (optional):</label>
<input class="form__input js-form-website" id=website-c21006f4 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-c21006f4>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-c21006f4 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-c21006f4>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-c21006f4 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-c21006f4>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-c21006f4 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div></li></ul></li></ul></li></ul></li><li class=comments__item id=comment-e6563865><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt="Marouen Mhiri" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Marouen Mhiri</div><div class=comments__author__metadata><time datetime=2017-08-31>2017.08.31, 15:34</time>,
<a class=comments__hash href=#comment-e6563865>ID: e6563865</a></div></div></div><p>Thx for the article. Is there a possibility to set a negativ Threshold so that the element become the class<br>visible' when they are i.e. 200px below the viewport?</p><button class="comments__reply js-comments__reply">
Reply to Marouen Mhiri</button><form class="form form--hidden js-form"><input type=hidden name=parent value=e6563865><div class=form__col><label class=form__label for=name-e6563865>Name:</label>
<input class="form__input js-form-name" id=name-e6563865 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-e6563865>Website (optional):</label>
<input class="form__input js-form-website" id=website-e6563865 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-e6563865>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-e6563865 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-e6563865>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-e6563865 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-e6563865>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-e6563865 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div><ul class=comments><li class=comments__item id=comment-6eaffad6><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt=screeny05 class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>screeny05</div><div class=comments__author__metadata><time datetime=2017-09-18>2017.09.18, 15:32</time>,
<a class=comments__hash href=#comment-6eaffad6>ID: 6eaffad6</a></div></div></div><p>jep. have a look at the rootMargin-option.</p><button class="comments__reply js-comments__reply">
Reply to screeny05</button><form class="form form--hidden js-form"><input type=hidden name=parent value=6eaffad6><div class=form__col><label class=form__label for=name-6eaffad6>Name:</label>
<input class="form__input js-form-name" id=name-6eaffad6 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-6eaffad6>Website (optional):</label>
<input class="form__input js-form-website" id=website-6eaffad6 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-6eaffad6>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-6eaffad6 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-6eaffad6>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-6eaffad6 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-6eaffad6>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-6eaffad6 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div><ul class=comments><li class=comments__item id=comment-26b616eb><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt="Marouen Mhiri" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Marouen Mhiri</div><div class=comments__author__metadata><time datetime=2017-09-18>2017.09.18, 22:12</time>,
<a class=comments__hash href=#comment-26b616eb>ID: 26b616eb</a></div></div></div><p>Already tried it out! but this seems to have an effect of the first intersectionObservers! Posted a question Stackoverflow, but still not have a response! I think this feature still buggy</p><button class="comments__reply js-comments__reply">
Reply to Marouen Mhiri</button><form class="form form--hidden js-form"><input type=hidden name=parent value=26b616eb><div class=form__col><label class=form__label for=name-26b616eb>Name:</label>
<input class="form__input js-form-name" id=name-26b616eb name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-26b616eb>Website (optional):</label>
<input class="form__input js-form-website" id=website-26b616eb name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-26b616eb>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-26b616eb name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-26b616eb>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-26b616eb name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-26b616eb>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-26b616eb name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div></li></ul></li></ul></li><li class=comments__item id=comment-24a42c93><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt=Nico class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Nico</div><div class=comments__author__metadata><time datetime=2017-11-03>2017.11.03, 15:29</time>,
<a class=comments__hash href=#comment-24a42c93>ID: 24a42c93</a></div></div></div><p>Hi Powel</p><p>Thanks for this great article, very informative!</p><p>Is there a possibility to track live elements in the DOM?</p><p>for example... Let's say we are tracking 10 div's and onChange of a checkbox the user can remove one or more div's from the DOM, then later re-insert them if they like.</p><p>Will the observer register first the reduced number of divs?</p><p>and...</p><p>then the increased number of div's and update accordingly?</p><p>if not is there a way to do so?<br>If not is this something that will change in the future?<br>If not is there a poly fill which can provide this functionality?</p><p>Thank you in advance,<br>Nico</p><button class="comments__reply js-comments__reply">
Reply to Nico</button><form class="form form--hidden js-form"><input type=hidden name=parent value=24a42c93><div class=form__col><label class=form__label for=name-24a42c93>Name:</label>
<input class="form__input js-form-name" id=name-24a42c93 name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-24a42c93>Website (optional):</label>
<input class="form__input js-form-website" id=website-24a42c93 name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-24a42c93>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-24a42c93 name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-24a42c93>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-24a42c93 name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-24a42c93>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-24a42c93 name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div></li><li class=comments__item id=comment-42024f4b><div class=comments__wrapper><div class=comments__author><img src=/assets/comment.svg alt="Alex Carletto" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Alex Carletto</div><div class=comments__author__metadata><time datetime=2017-11-16>2017.11.16, 18:20</time>,
<a class=comments__hash href=#comment-42024f4b>ID: 42024f4b</a></div></div></div><p>Hi! thanks for the article.<br>I'm trying to get it work on Safari and iOS but i'm stucked. Other browsers and device ok.<br>Here is how i declare the Observer:<br>function createObserver() {<br>var observer;<br>var options = {<br>root: null,<br>rootMargin: "0px",<br>threshold: buildThresholdList()<br>};<br>observer = new IntersectionObserver(handleIntersect, options);<br>observer.observe(boxElement);<br>}</p><p>Here the handleIntersect function:<br>function handleIntersect(entries, observer) {<br>entries.forEach(function(entry) {<br>if (entry.intersectionRatio > prevRatio) {<br>console.log("VIDEO IN");<br>p.style.position = "relative";<br>} else if(entry.intersectionRatio === 0 && scrolled === 1 ) {<br>console.log("VIDEO OUT");<br>p.style.position = "fixed";<br>}<br>});<br>}</p><p>My goal is to change position to a video element if the user scrolls further to the video element.<br>I tried also to use a setTimeout in handleIntersect() but nothing changes.<br>Can you help me? Thanks in advance</p><button class="comments__reply js-comments__reply">
Reply to Alex Carletto</button><form class="form form--hidden js-form"><input type=hidden name=parent value=42024f4b><div class=form__col><label class=form__label for=name-42024f4b>Name:</label>
<input class="form__input js-form-name" id=name-42024f4b name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-42024f4b>Website (optional):</label>
<input class="form__input js-form-website" id=website-42024f4b name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-42024f4b>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-42024f4b name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-42024f4b>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-42024f4b name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-42024f4b>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-42024f4b name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div><ul class=comments><li class=comments__item id=comment-5a03c9cc><div class=comments__wrapper><div class=comments__author><img src=/assets/logo.jpg alt="Pawel Grzybek" class=comments__author__photo><div class=comments__author__data><div class=comments__author__name>Pawel Grzybek</div><div class=comments__author__metadata><time datetime=2017-11-17>2017.11.17, 11:02</time>,
<a class=comments__hash href=#comment-5a03c9cc>ID: 5a03c9cc</a></div></div></div><p>Hi. I mentioned that on the article that this is a bleeding edge API and browser support can vary across vendors. Please have a look at the compatibility table first.</p><p><a title=https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver rel="nofollow noopener" href=https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver>https://developer.mozilla.o...</a></p><button class="comments__reply js-comments__reply">
Reply to Pawel Grzybek</button><form class="form form--hidden js-form"><input type=hidden name=parent value=5a03c9cc><div class=form__col><label class=form__label for=name-5a03c9cc>Name:</label>
<input class="form__input js-form-name" id=name-5a03c9cc name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website-5a03c9cc>Website (optional):</label>
<input class="form__input js-form-website" id=website-5a03c9cc name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter-5a03c9cc>Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter-5a03c9cc name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github-5a03c9cc>GitHub (optional):</label>
<input class="form__input js-form-github" id=github-5a03c9cc name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea-5a03c9cc>Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea-5a03c9cc name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></div></li></ul></li></ul><h2 id=what-ya-think>What'ya think?</h2><form class="form js-form"><input type=hidden name=parent><div class=form__col><label class=form__label for=name->Name:</label>
<input class="form__input js-form-name" id=name- name=name type=text placeholder="Barack Obama" required></div><div class=form__col><label class=form__label for=website->Website (optional):</label>
<input class="form__input js-form-website" id=website- name=website type=url placeholder=https://barackobama.com></div><div class=form__col><label class=form__label for=twitter->Twitter (optional):</label>
<input class="form__input js-form-twitter" id=twitter- name=twitter type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=github->GitHub (optional):</label>
<input class="form__input js-form-github" id=github- name=github type=text placeholder=barackobama></div><div class=form__col><label class=form__label for=comment-textarea->Comment:</label>
<textarea class="form__input form__input--textarea" id=comment-textarea- name=comment placeholder="I think‚Ä¶" required></textarea><p class=form__tip>üëÜ you can use Markdown here</p></div><label class=form__row><input class="form__checkbox js-form-save-data" name=save type=checkbox>
<span class="form__label form__label--thin">Save my data for the next time I comment</span></label><div class=form__row><button class=form__button type=submit>Submit comment</button></div></form><div class="moderation moderation--hidden">Your comment is awaiting moderation. Thanks!</div></article><script src=/comments.js></script></main><footer class=footer>Copyright ¬© 2021 Pawel Grzybek</footer></div></body></html>